/**
 * This code was AUTOGENERATED using the codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  isProgramError,
  type Address,
  type SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM,
  type SolanaError,
} from '@solana/kit';
import { SOLANA_ATTESTATION_SERVICE_PROGRAM_ADDRESS } from '../programs';

/** InvalidCredential: Incorrect Credential account */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_CREDENTIAL = 0x0; // 0
/** InvalidSchema: Incorrect Schema account */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_SCHEMA = 0x1; // 1
/** InvalidAttestation: Incorrect Attestation account */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_ATTESTATION = 0x2; // 2
/** InvalidAuthority: Authority was not found in Credential authorized_signatures */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_AUTHORITY = 0x3; // 3
/** InvalidSchemaDataType: Incorrect Schema data type */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_SCHEMA_DATA_TYPE = 0x4; // 4
/** SignerNotAuthorized: The signer is not one of the Credential's authorized signers */
export const SOLANA_ATTESTATION_SERVICE_ERROR__SIGNER_NOT_AUTHORIZED = 0x5; // 5
/** InvalidAttestationData: Attestation data does not conform to the Schema */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_ATTESTATION_DATA = 0x6; // 6
/** InvalidEventAuthority: Incorrect Event Authority */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_EVENT_AUTHORITY = 0x7; // 7
/** InvalidMint: Incorrect Mint */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_MINT = 0x8; // 8
/** InvalidProgramSigner: Incorrect Program Signer */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_PROGRAM_SIGNER = 0x9; // 9
/** InvalidTokenAccount: Incorrect Token Account */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_TOKEN_ACCOUNT = 0xa; // 10
/** SchemaPaused: Schema is paused */
export const SOLANA_ATTESTATION_SERVICE_ERROR__SCHEMA_PAUSED = 0xb; // 11
/** InvalidAddressTree: Invalid Address Tree (not the allowed tree for compressed attestations) */
export const SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_ADDRESS_TREE = 0xc; // 12

export type SolanaAttestationServiceError =
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_ADDRESS_TREE
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_ATTESTATION
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_ATTESTATION_DATA
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_AUTHORITY
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_CREDENTIAL
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_EVENT_AUTHORITY
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_MINT
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_PROGRAM_SIGNER
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_SCHEMA
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_SCHEMA_DATA_TYPE
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_TOKEN_ACCOUNT
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__SCHEMA_PAUSED
  | typeof SOLANA_ATTESTATION_SERVICE_ERROR__SIGNER_NOT_AUTHORIZED;

let solanaAttestationServiceErrorMessages:
  | Record<SolanaAttestationServiceError, string>
  | undefined;
if (process.env.NODE_ENV !== 'production') {
  solanaAttestationServiceErrorMessages = {
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_ADDRESS_TREE]: `Invalid Address Tree (not the allowed tree for compressed attestations)`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_ATTESTATION]: `Incorrect Attestation account`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_ATTESTATION_DATA]: `Attestation data does not conform to the Schema`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_AUTHORITY]: `Authority was not found in Credential authorized_signatures`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_CREDENTIAL]: `Incorrect Credential account`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_EVENT_AUTHORITY]: `Incorrect Event Authority`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_MINT]: `Incorrect Mint`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_PROGRAM_SIGNER]: `Incorrect Program Signer`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_SCHEMA]: `Incorrect Schema account`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_SCHEMA_DATA_TYPE]: `Incorrect Schema data type`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__INVALID_TOKEN_ACCOUNT]: `Incorrect Token Account`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__SCHEMA_PAUSED]: `Schema is paused`,
    [SOLANA_ATTESTATION_SERVICE_ERROR__SIGNER_NOT_AUTHORIZED]: `The signer is not one of the Credential's authorized signers`,
  };
}

export function getSolanaAttestationServiceErrorMessage(
  code: SolanaAttestationServiceError
): string {
  if (process.env.NODE_ENV !== 'production') {
    return (
      solanaAttestationServiceErrorMessages as Record<
        SolanaAttestationServiceError,
        string
      >
    )[code];
  }

  return 'Error message not available in production bundles.';
}

export function isSolanaAttestationServiceError<
  TProgramErrorCode extends SolanaAttestationServiceError,
>(
  error: unknown,
  transactionMessage: {
    instructions: Record<number, { programAddress: Address }>;
  },
  code?: TProgramErrorCode
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> &
  Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(
    error,
    transactionMessage,
    SOLANA_ATTESTATION_SERVICE_PROGRAM_ADDRESS,
    code
  );
}
